import { format, isValid } from 'date-fns';
import { RegexEnum } from '../commons/enums/regex.enum';
export class DateSimplifyService {
    constructor() {
        this.DiffYear = 0;
        this.actualYear = 0;
    }
    getRangeLimit(dateRange, ChangeDate) {
        if (ChangeDate) {
            this.actualYear = new Date(ChangeDate).getFullYear();
        }
        if (!ChangeDate || ChangeDate != '') {
            this.actualYear = new Date().getFullYear();
        }
        if (dateRange) {
            if (dateRange == 0 || !dateRange) {
                return 'Invalid Age';
            }
            const firstDayOfYear = new Date(this.actualYear, 0, 1);
            this.DiffYear = Number(firstDayOfYear.getUTCFullYear() - Number(dateRange));
            return format(new Date(this.DiffYear, 0, 1), 'yyyy');
        }
        return "Invalid Range";
    }
    dateFormat(documentFormat) {
        if (documentFormat) {
            if (documentFormat.match(RegexEnum.FORMAT_DATE)) {
                documentFormat = documentFormat.replace(RegexEnum.FORMAT_DATE, "$1/$2/$3");
            }
            if (!isValid(new Date(documentFormat))) {
                return documentFormat;
            }
            return format(new Date(documentFormat), 'yyyy/dd/MM');
        }
        return 'Error';
    }
    dateIsValid(day, month, year) {
        return isValid(new Date(`${day}/${month}/${year}`));
    }
    dateIsValidFix(day, month, year) {
        try {
            var dayParser = Number(day);
            var monthParser = Number(month);
            var yearParser = Number(year);
            if (Number(day) <= 0) {
                dayParser = dayParser + 1;
            }
            if (Number(day) >= 31) {
                dayParser = dayParser - 1;
            }
            if (Number(month) <= 0) {
                monthParser = monthParser + 1;
            }
            if (Number(month) >= 12) {
                monthParser = monthParser - 1;
            }
            return `${dayParser}/${monthParser}/${yearParser}`;
        }
        catch (e) {
            return 'error';
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1zaW1wbGlmeS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvZGF0ZS1zaW1wbGlmeS9zcmMvbGliL3NlcnZpY2VzL2RhdGUtc2ltcGxpZnkuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFHeEQsTUFBTSxPQUFPLG1CQUFtQjtJQUFoQztRQUVVLGFBQVEsR0FBRyxDQUFDLENBQUM7UUFDYixlQUFVLEdBQUcsQ0FBQyxDQUFDO0lBeUV6QixDQUFDO0lBdkVRLGFBQWEsQ0FBQyxTQUFpQixFQUFFLFVBQXdCO1FBQzlELElBQUksVUFBVSxFQUFFO1lBQ2QsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtTQUNyRDtRQUNELElBQUksQ0FBQyxVQUFVLElBQUksVUFBVSxJQUFJLEVBQUUsRUFBRTtZQUNuQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUE7U0FDM0M7UUFFRCxJQUFJLFNBQVMsRUFBRTtZQUNiLElBQUksU0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtnQkFDaEMsT0FBTyxhQUFhLENBQUE7YUFDckI7WUFDRCxNQUFNLGNBQWMsR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN2RCxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxjQUFjLENBQUMsY0FBYyxFQUFFLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDNUUsT0FBTyxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUE7U0FDckQ7UUFDRCxPQUFPLGVBQWUsQ0FBQztJQUd6QixDQUFDO0lBQ00sVUFBVSxDQUFDLGNBQXNCO1FBQ3RDLElBQUksY0FBYyxFQUFFO1lBQ2xCLElBQUksY0FBYyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLEVBQUU7Z0JBQy9DLGNBQWMsR0FBRyxjQUFjLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsVUFBVSxDQUFDLENBQUM7YUFFNUU7WUFDRCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3RDLE9BQU8sY0FBYyxDQUFDO2FBQ3ZCO1lBRUQsT0FBTyxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUE7U0FDdEQ7UUFDRCxPQUFPLE9BQU8sQ0FBQTtJQUNoQixDQUFDO0lBRU0sV0FBVyxDQUFHLEdBQVcsRUFBRSxLQUFhLEVBQUUsSUFBWTtRQUMzRCxPQUFPLE9BQU8sQ0FBQyxJQUFJLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxLQUFLLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFBO0lBRXJELENBQUM7SUFDTSxjQUFjLENBQUUsR0FBVyxFQUFFLEtBQWEsRUFBRSxJQUFZO1FBRTdELElBQUk7WUFDRixJQUFJLFNBQVMsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDM0IsSUFBSSxXQUFXLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFBO1lBQy9CLElBQUksVUFBVSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUU3QixJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7Z0JBQ3BCLFNBQVMsR0FBRyxTQUFTLEdBQUcsQ0FBQyxDQUFDO2FBQzNCO1lBQ0QsSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxFQUFFO2dCQUNyQixTQUFTLEdBQUcsU0FBUyxHQUFHLENBQUMsQ0FBQzthQUMzQjtZQUVELElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDdEIsV0FBVyxHQUFHLFdBQVcsR0FBRyxDQUFDLENBQUM7YUFDL0I7WUFDRCxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLEVBQUU7Z0JBQ3ZCLFdBQVcsR0FBRyxXQUFXLEdBQUcsQ0FBQyxDQUFDO2FBQy9CO1lBQ0QsT0FBTyxHQUFHLFNBQVMsSUFBSSxXQUFXLElBQUksVUFBVSxFQUFFLENBQUE7U0FDbkQ7UUFDRCxPQUFPLENBQUMsRUFBRTtZQUVSLE9BQU8sT0FBTyxDQUFDO1NBQ2hCO0lBSUgsQ0FBQztDQUdGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9ybWF0LCBpc1ZhbGlkIH0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IHsgUmVnZXhFbnVtIH0gZnJvbSAnLi4vY29tbW9ucy9lbnVtcy9yZWdleC5lbnVtJztcblxuXG5leHBvcnQgY2xhc3MgRGF0ZVNpbXBsaWZ5U2VydmljZSB7XG5cbiAgcHJpdmF0ZSBEaWZmWWVhciA9IDA7XG4gIHByaXZhdGUgYWN0dWFsWWVhciA9IDA7XG5cbiAgcHVibGljIGdldFJhbmdlTGltaXQoZGF0ZVJhbmdlOiBudW1iZXIsIENoYW5nZURhdGU/OiBzdHJpbmcgfCAnJyk6IHN0cmluZyB7XG4gICAgaWYgKENoYW5nZURhdGUpIHtcbiAgICAgIHRoaXMuYWN0dWFsWWVhciA9IG5ldyBEYXRlKENoYW5nZURhdGUpLmdldEZ1bGxZZWFyKClcbiAgICB9XG4gICAgaWYgKCFDaGFuZ2VEYXRlIHx8IENoYW5nZURhdGUgIT0gJycpIHtcbiAgICAgIHRoaXMuYWN0dWFsWWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKVxuICAgIH1cblxuICAgIGlmIChkYXRlUmFuZ2UpIHtcbiAgICAgIGlmIChkYXRlUmFuZ2UgPT0gMCB8fCAhZGF0ZVJhbmdlKSB7XG4gICAgICAgIHJldHVybiAnSW52YWxpZCBBZ2UnXG4gICAgICB9XG4gICAgICBjb25zdCBmaXJzdERheU9mWWVhciA9IG5ldyBEYXRlKHRoaXMuYWN0dWFsWWVhciwgMCwgMSk7XG4gICAgICB0aGlzLkRpZmZZZWFyID0gTnVtYmVyKGZpcnN0RGF5T2ZZZWFyLmdldFVUQ0Z1bGxZZWFyKCkgLSBOdW1iZXIoZGF0ZVJhbmdlKSk7XG4gICAgICByZXR1cm4gZm9ybWF0KG5ldyBEYXRlKHRoaXMuRGlmZlllYXIsIDAsIDEpLCAneXl5eScpXG4gICAgfVxuICAgIHJldHVybiBcIkludmFsaWQgUmFuZ2VcIjtcblxuXG4gIH1cbiAgcHVibGljIGRhdGVGb3JtYXQoZG9jdW1lbnRGb3JtYXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKGRvY3VtZW50Rm9ybWF0KSB7XG4gICAgICBpZiAoZG9jdW1lbnRGb3JtYXQubWF0Y2goUmVnZXhFbnVtLkZPUk1BVF9EQVRFKSkge1xuICAgICAgICBkb2N1bWVudEZvcm1hdCA9IGRvY3VtZW50Rm9ybWF0LnJlcGxhY2UoUmVnZXhFbnVtLkZPUk1BVF9EQVRFLCBcIiQxLyQyLyQzXCIpO1xuXG4gICAgICB9XG4gICAgICBpZiAoIWlzVmFsaWQobmV3IERhdGUoZG9jdW1lbnRGb3JtYXQpKSkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnRGb3JtYXQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmb3JtYXQobmV3IERhdGUoZG9jdW1lbnRGb3JtYXQpLCAneXl5eS9kZC9NTScpXG4gICAgfVxuICAgIHJldHVybiAnRXJyb3InXG4gIH1cblxuICBwdWJsaWMgZGF0ZUlzVmFsaWQoICBkYXk6IHN0cmluZywgbW9udGg6IHN0cmluZywgeWVhcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzVmFsaWQobmV3IERhdGUoYCR7ZGF5fS8ke21vbnRofS8ke3llYXJ9YCkpXG5cbiAgfVxuICBwdWJsaWMgZGF0ZUlzVmFsaWRGaXgoIGRheTogc3RyaW5nLCBtb250aDogc3RyaW5nLCB5ZWFyOiBzdHJpbmcpOiBzdHJpbmcge1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhciBkYXlQYXJzZXIgPSBOdW1iZXIoZGF5KVxuICAgICAgdmFyIG1vbnRoUGFyc2VyID0gTnVtYmVyKG1vbnRoKVxuICAgICAgdmFyIHllYXJQYXJzZXIgPSBOdW1iZXIoeWVhcilcblxuICAgICAgaWYgKE51bWJlcihkYXkpIDw9IDApIHtcbiAgICAgICAgZGF5UGFyc2VyID0gZGF5UGFyc2VyICsgMTtcbiAgICAgIH1cbiAgICAgIGlmIChOdW1iZXIoZGF5KSA+PSAzMSkge1xuICAgICAgICBkYXlQYXJzZXIgPSBkYXlQYXJzZXIgLSAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoTnVtYmVyKG1vbnRoKSA8PSAwKSB7XG4gICAgICAgIG1vbnRoUGFyc2VyID0gbW9udGhQYXJzZXIgKyAxO1xuICAgICAgfVxuICAgICAgaWYgKE51bWJlcihtb250aCkgPj0gMTIpIHtcbiAgICAgICAgbW9udGhQYXJzZXIgPSBtb250aFBhcnNlciAtIDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7ZGF5UGFyc2VyfS8ke21vbnRoUGFyc2VyfS8ke3llYXJQYXJzZXJ9YFxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuXG4gICAgICByZXR1cm4gJ2Vycm9yJztcbiAgICB9XG5cblxuXG4gIH1cblxuXG59XG5cblxuXG5cbiJdfQ==